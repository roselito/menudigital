<!DOCTYPE html>
<html lang="en" xmlns:th="<http://www.thymeleaf.org>"> 
    <head>
        <title>RFS</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
        <link rel="stylesheet" href="myScripts/myCSS.css">
    </head>
    <body>
        <div class="container-fluid p-0 text-center ">
            <div class="row align-items-center mt-1 mb-1">
                <div class="col-12 justify-content-end d-flex ">
                    <span 
                        th:text="'OlÃ¡, '+${userName}"
                        class="me-2" 
                        th:unless="${#strings.isEmpty(userName)}">
                    </span>
                </div>
                <div class="d-flex flex-row justify-content-between">
                    <div th:unless="${userName.isEmpty()}"
                         th:insert="~{fragments/components/botoes :: 
                         botao(texto='Cadastro',
                         imagem='bi-person',
                         cor='btn-primary',
                         toggle='modal',
                         target='#modalLogin')}" ></div>
                    <div th:unless="${cart.isEmpty()}"
                         th:insert="~{fragments/components/botoes :: 
                         botao(texto='Carrinho',
                         imagem='bi-cart',
                         cor='btn-primary',
                         toggle='modal',
                         target='#modalCart')}" ></div>
                    <div th:if="${userName.isEmpty()}"
                         th:insert="~{fragments/components/botoes :: 
                         botao(texto='Entrar',
                         imagem='bi-box-arrow-in-right',
                         cor='btn-primary',
                         toggle='modal',
                         target='#modalLogin')}" ></div>
                    <form 
                        th:action="@{/logout}" 
                        th:unless="${#strings.isEmpty(userName)}" 
                        method="post">
                        <div 
                            th:insert="~{fragments/components/botoes :: 
                            botao(texto='Sair',
                            revImagem='bi-box-arrow-right',
                            tipo='submit')}" ></div>                    
                    </form>
                </div>
            </div>

            <div th:if="${errorMessage}" class="mensagem m-0 px-2 py-1">
                <div class="alert alert-danger m-0 p-0">
                    <p th:text="${errorMessage}" class="my-1 p-0" >Erro</p>
                </div>            
            </div>

            <div th:if="${successMessage}" class="mensagem m-0 px-2 py-1">
                <div class="alert alert-success m-0 p-0">
                    <p th:text="${successMessage}" class="my-1 p-0">Sucesso</p>
                </div>
            </div>

            <div class="m-0 mw-100 p-0 ps-1 row row-cols-1 row-cols-sm-2">
                <div class="col-sm-6 m-0 mb-1 p-0 pe-1" th:each="item,i : ${itens}">
                    <div th:insert="~{fragments/cartao :: cartao(${item})}"></div>
                </div>
            </div>

            <div th:insert="~{fragments/modals/carrinho :: carrinho}"></div>
            <div th:insert="~{fragments/modals/selecionado :: selecionado}"></div>
            <div th:insert="~{fragments/modals/login :: login}"></div>
            <div th:insert="~{fragments/modals/address :: address}"></div>            

            <input type="hidden" id="closeModalCart" th:value="${closeModalCart}" />

        </div>
        <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
        <script src="myScripts/myJS.js"></script>
    </body>
</html>
